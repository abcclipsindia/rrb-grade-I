<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RRB Technician GR-I Mock Test</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;500;700&display=swap');
        
        :root {
            --primary-bg: #f1f2f6;
            --secondary-bg: #ffffff;
            --header-bg: #c0392b; /* Indian Railway Red */
            --text-color: #333;
            --light-text: #fff;
            --border-color: #dfe4ea;
            --green: #27ae60;
            --red: #e74c3c;
            --purple: #8e44ad;
            --blue: #2980b9;
            --gray: #7f8c8d;
            --answered-text: #fff;
            --shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Noto Sans Devanagari', sans-serif;
            background-color: var(--primary-bg);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }

        .hidden { display: none !important; }

        .container {
            width: 100%;
            max-width: 1200px;
            background-color: var(--secondary-bg);
            border-radius: 12px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        /* --- Instructions Screen --- */
        #instructions-screen { padding: 0.5rem; }
        #instructions-screen h1 { text-align: center; color: var(--header-bg); margin-bottom: 2rem; font-size: 1.4rem; }
        .instructions-content { max-height: 60vh; overflow-y: auto; padding-right: 1.5rem; }
        .instructions-content h3 { margin-top: 0.5rem; border-bottom: 2px solid var(--blue); padding-bottom: 0.5rem; color: #333; }
        .instructions-content p, .instructions-content ul { margin-top: 0.5rem; line-height: 1.5; }
        .instructions-content ul { list-style-position: inside; padding-left: 1rem; }
        .instructions-content li { margin-bottom: 0.5rem; }
        .palette-info { display: flex; align-items: center; gap: 15px; margin-top: 8px; }
        .palette-box { width: 35px; height: 35px; border-radius: 8px; }
        .legend-answered { background-color: var(--green); }
        .legend-not-answered { background-color: var(--red); }
        .legend-not-visited { background-color: #bdc3c7; }
        .legend-marked { background-color: var(--purple); }
        .start-test-btn {
            display: block;
            width: 150px;
            margin: 2.5rem auto;
            padding: 0.9rem 1.0rem;
            background-color: var(--green);
            color: var(--light-text);
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        .start-test-btn:hover { background-color: #2ecc71; box-shadow: 0 4px 10px rgba(39, 174, 96, 0.4); transform: translateY(-2px); }

        /* --- Main Test Screen --- */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.0rem;
            background-color: var(--header-bg);
            color: var(--light-text);
        }
        .header h1 { font-size: 1.0rem; }
        .timer { font-size: 1.4rem; font-weight: 700; background-color: rgba(0,0,0,0.15); padding: 5px 15px; border-radius: 5px; }

        .main-test-area {
            display: flex;
            height: calc(100vh - 140px);
            min-height: 600px;
        }

        .question-section {
            flex-grow: 1;
            padding: 1.0rem 1.0rem;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        .question-header { display: flex; justify-content: space-between; margin-bottom: 1.0rem; font-weight: 500; font-size: 1.0rem;}
        .question-content { flex-grow: 1; }
        .question-text { font-size: 1.2rem; font-weight: 500; margin-bottom: 1.0rem; line-height: 1.6; }
        .options-container { display: flex; flex-direction: column; gap: 1rem; }
        .option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 1rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .option:hover { background-color: #ecf0f1; }
        .option.selected { background-color: #d6eaf8; border-color: var(--blue); font-weight: 500;}
        .option input[type="radio"] { transform: scale(1.3); pointer-events: none; /* Let the parent div handle clicks */ }
        .option label { flex-grow: 1; cursor: pointer; }

        .navigation-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 1.0rem;
            padding-top: 1.0rem;
            border-top: 1px solid var(--border-color);
        }
        .nav-btn {
            padding: 0.7rem 1.0rem;
            border: none;
            border-radius: 5px;
            color: var(--light-text);
            font-weight: 700;
            cursor: pointer;
            transition: opacity 0.3s;
            font-size: 1rem;
        }
        .nav-btn:hover { opacity: 0.75; }
        .save-next { background-color: var(--green); }
        .mark-review { background-color: var(--purple); }
        .clear-response { background-color: var(--gray); }
        .submit-test { background-color: var(--red); margin-left: auto; }
        
        .palette-section {
            width: 320px;
            min-width: 280px;
            background-color: #ecf0f1;
            padding: 1.5rem;
            overflow-y: auto;
            border-left: 1px solid var(--border-color);
        }
        .palette-header { text-align: center; margin-bottom: 1rem; font-weight: 700; font-size: 1.2rem;}
        .question-palette {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(42px, 1fr));
            gap: 10px;
        }
        .palette-item {
            width: 42px;
            height: 42px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
        }
        .palette-item:hover { transform: scale(1.05); }
        .q-not-visited { background-color: #bdc3c7; color: #333;}
        .q-not-answered { background-color: var(--red); color: var(--answered-text); }
        .q-answered { background-color: var(--green); color: var(--answered-text); }
        .q-marked { background-color: var(--purple); color: var(--answered-text); }
        .q-answered-marked::after {
            content: '✔';
            position: absolute;
            bottom: 3px;
            right: 5px;
            font-size: 0.9rem;
            color: var(--green);
            background: white;
            border-radius: 50%;
            width: 14px;
            height: 14px;
            line-height: 14px;
            text-align: center;
        }

        /* --- Results Screen --- */
        #results-screen { text-align: center; padding: 1.0rem; }
        #results-screen h2 { color: var(--header-bg); font-size: 2.0rem; margin-bottom: 1.0rem;}
        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.0rem;
            max-width: 600px;
            margin: 1rem auto;
            text-align: left;
        }
        .result-item { background-color: #f8f9fa; padding: 1.0rem; border-radius: 8px; border-left: 5px solid; }
        .result-item p { font-size: 1.1rem; margin: 0; }
        .result-item span { font-size: 1.5rem; font-weight: 700; }
        #total-q-item { border-color: var(--gray); }
        #attempted-q-item { border-color: var(--blue); }
        #correct-q-item { border-color: var(--green); }
        #incorrect-q-item { border-color: var(--red); }
        .score { font-size: 1.5rem !important; font-weight: 700; color: var(--header-bg); margin-top: 1.0rem;}
        #score-text{ display: block; }
        #retry-btn { margin-top: 0.5rem; }

        @media (max-width: 992px) {
            .main-test-area { flex-direction: column; height: auto; }
            .palette-section { width: 100%; height: 300px; border-left: none; border-top: 1px solid var(--border-color); }
        }
        @media (max-width: 600px) {
            .results-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="instructions-screen">
            <h1>RRB Technician GR-I Mock Test</h1>
            <div class="instructions-content">
                <h3>निम्नलिखित निर्देशों को ध्यान से पढ़ें:</h3>
                <ol>
                    <li>परीक्षा की कुल अवधि <strong>90 मिनट</strong> है।</li>
                    <li>स्क्रीन के ऊपरी दाएं कोने में टाइमर परीक्षा पूरी करने के लिए शेष समय प्रदर्शित करेगा।</li>
                        <ul>
                            <li><div class="palette-info"><div class="palette-box legend-not-visited"></div><span>आप अभी तक प्रश्न पर नहीं गए हैं।</span></div></li>
                            <li><div class="palette-info"><div class="palette-box legend-not-answered"></div><span>आपने प्रश्न का उत्तर नहीं दिया है।</span></div></li>
                            <li><div class="palette-info"><div class="palette-box legend-answered"></div><span>आपने प्रश्न का उत्तर दे दिया है।</span></div></li>
                            <li><div class="palette-info"><div class="palette-box legend-marked"></div><span>आपने प्रश्न का उत्तर नहीं दिया है, लेकिन समीक्षा के लिए चिह्नित किया है।</span></div></li>
                        </ul>
                    </li>
                    <li>'समीक्षा के लिए चिह्नित' स्थिति केवल यह इंगित करती है कि आप उस प्रश्न को फिर से देखना चाहेंगे।</li>
                </ol>
                <h3>प्रश्नों का उत्तर देना:</h3>
                <ul>
                    <li>अपना उत्तर चुनने के लिए, किसी एक विकल्प के बटन पर क्लिक करें।</li>
                    <li>अपने चुने हुए उत्तर को अचयनित करने के लिए, Clear Response बटन पर क्लिक करें।</li>
                    <li>अपना चुना हुआ उत्तर बदलने के लिए, बस किसी दूसरे विकल्प के बटन पर क्लिक करें।</li>
                    <li>अपना उत्तर सहेजने के लिए, आपको Save & Next बटन पर क्लिक करना होगा।</li>
                    <li>प्रश्न को समीक्षा के लिए चिह्नित करने के लिए, Mark for Review & Next बटन पर क्लिक करें।</li>
                </ul>
                 <h3>अंकन योजना:</h3>
                 <ul>
                    <li>इस परीक्षा में <strong>100 प्रश्न</strong> हैं।</li>
                    <li>प्रत्येक सही उत्तर के लिए <strong>1 अंक</strong> दिया जाएगा।</li>
                    <li>प्रत्येक गलत उत्तर के लिए, 1/3 अंक काट लिया जाएगा।</li>
                    <li>जिन प्रश्नों का प्रयास नहीं किया गया है, उनके लिए कोई दंड नहीं है।</li>
                 </ul>
            </div>
            <button id="start-test-btn" class="start-test-btn">मैं तैयार हूँ</button>
        </div>

        <div id="main-test-screen" class="hidden">
            <header class="header">
                <h1>RRB Technician GR-I Mock Test</h1>
                <div class="timer">शेष समय: <span id="time">01:30:00</span></div>
            </header>
            <main class="main-test-area">
                <section class="question-section">
                    <div class="question-header">
                        <span id="q-section">खंड: General Awareness</span>
                        <span id="q-num">Q.No-: 1</span>
                    </div>
                    <div class="question-content">
                        <p class="question-text" id="question-text">प्रश्न यहाँ प्रदर्शित किया जाएगा।</p>
                        <div class="options-container" id="options-container">
                        </div>
                    </div>
                    <div class="navigation-buttons">
                        <button class="nav-btn save-next" id="save-next-btn">Save & Next</button>
                        <button class="nav-btn mark-review" id="mark-review-btn">Mark for Review & Next</button>
                        <button class="nav-btn clear-response" id="clear-response-btn">Clear Response</button>
                        <button class="nav-btn submit-test" id="submit-btn">Submit</button>
                    </div>
                </section>
                <aside class="palette-section">
                    <div class="palette-header">Question Numbers</div>
                    <div class="question-palette" id="question-palette">
                    </div>
                </aside>
            </main>
        </div>
        
        <div id="results-screen" class="hidden">
             <h2>टेस्ट पूरा हुआ!</h2>
             <p>यहां आपके प्रदर्शन का सारांश है।</p>
             <div class="results-grid">
                 <div class="result-item" id="total-q-item">
                     <p>कुल प्रश्न<br><span id="total-q">100</span></p>
                 </div>
                 <div class="result-item" id="attempted-q-item">
                    <p>प्रयास किए गए<br><span id="attempted-q">0</span></p>
                 </div>
                 <div class="result-item" id="correct-q-item">
                     <p>सही<br><span id="correct-q">0</span></p>
                 </div>
                 <div class="result-item" id="incorrect-q-item">
                    <p>गलत<br><span id="incorrect-q">0</span></p>
                 </div>
             </div>
             <p class="score">अंतिम स्कोर: <span id="score-text">0 / 100</span></p>
             <button id="retry-btn" class="start-test-btn">पुनः प्रयास करें</button>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DOM Elements ---
        const elements = {
            instructionsScreen: document.getElementById('instructions-screen'),
            mainTestScreen: document.getElementById('main-test-screen'),
            resultsScreen: document.getElementById('results-screen'),
            startTestBtn: document.getElementById('start-test-btn'),
            retryBtn: document.getElementById('retry-btn'),
            timer: document.getElementById('time'),
            qSection: document.getElementById('q-section'),
            qNum: document.getElementById('q-num'),
            questionText: document.getElementById('question-text'),
            optionsContainer: document.getElementById('options-container'),
            questionPalette: document.getElementById('question-palette'),
            saveNextBtn: document.getElementById('save-next-btn'),
            markReviewBtn: document.getElementById('mark-review-btn'),
            clearResponseBtn: document.getElementById('clear-response-btn'),
            submitBtn: document.getElementById('submit-btn'),
            totalQ: document.getElementById('total-q'),
            attemptedQ: document.getElementById('attempted-q'),
            correctQ: document.getElementById('correct-q'),
            incorrectQ: document.getElementById('incorrect-q'),
            scoreText: document.getElementById('score-text'),
        };

        // --- Question Data ---
        const allQuestions = [
            // General Awareness  (10 Questions)
            { section: "सामान्य जागरूकता", question: "भारत में राष्ट्रीय युवा दिवस किस दिन मनाया जाता है?", options: ["12 जनवरी", "15 जनवरी", "20 जनवरी", "1 जनवरी"], answer: "12 जनवरी" },
            { section: "सामान्य जागरूकता", question: "भारतीय संविधान के किस अनुच्छेद के तहत जीवन और व्यक्तिगत स्वतंत्रता का अधिकार प्रदान किया गया है?", options: ["अनुच्छेद 21", "अनुच्छेद 19", "अनुच्छेद 22", "अनुच्छेद 20"], answer: "अनुच्छेद 21" },
            { section: "सामान्य जागरूकता", question: "प्रसिद्ध 'हॉर्नबिल महोत्सव' भारत के किस राज्य में मनाया जाता है?", options: ["मिजोरम", "नागालैंड", "मेघालय", "असम"], answer: "नागालैंड" },
            { section: "सामान्य जागरूकता", question: "भारत का नेपोलियन किसे कहा जाता है?", options: ["चंद्रगुप्त मौर्य", "समुद्रगुप्त", "अशोक", "हर्षवर्धन"], answer: "समुद्रगुप्त" },
            { section: "सामान्य जागरूकता", question: "पानीपत का प्रथम युद्ध कब और किसके बीच हुआ था?", options: ["1526 में बाबर और इब्राहिम लोदी", "1556 में अकबर और हेमू", "1761 में मराठा और अहमद शाह अब्दाली", "1530 में बाबर और राणा सांगा"], answer: "1526 में बाबर और इब्राहिम लोदी" },
            { section: "सामान्य जागरूकता", question: "दक्षिण भारत की सबसे ऊँची चोटी कौन सी है?", options: ["डोडाबेट्टा", "अनाइमुडी", "महेंद्रगिरि", "अमरकंटक"], answer: "अनाइमुडी" },
            { section: "सामान्य जागरूकता", question: "विश्व व्यापार संगठन (WTO) का मुख्यालय कहाँ स्थित है?", options: ["न्यूयॉर्क", "पेरिस", "जिनेवा", "वाशिंगटन डी.सी."], answer: "जिनेवा" },
            { section: "सामान्य जागरूकता", question: "पुस्तक 'विंग्स ऑफ फायर' के लेखक कौन हैं?", options: ["जवाहरलाल नेहरू", "महात्मा गांधी", "ए.पी.जे. अब्दुल कलाम", "अटल बिहारी वाजपेयी"], answer: "ए.पी.जे. अब्दुल कलाम" },
            { section: "सामान्य जागरूकता", question: "निम्नलिखित में से कौन सा देश सार्क (SAARC) का सदस्य नहीं है?", options: ["भूटान", "नेपाल", "म्यांमार", "मालदीव"], answer: "म्यांमार" },
            { section: "सामान्य जागरूकता", question: "भारत में श्वेत क्रांति (White Revolution) का जनक किसे माना जाता है?", options: ["एम.एस. स्वामीनाथन", "नॉर्मन बोरलॉग", "वर्गीज कुरियन", "अरुण कृष्णन"], answer: "वर्गीज कुरियन" },

            // खंड: सामान्य बुद्धि और तर्क (15 प्रश्न)
            { section: "सामान्य बुद्धि और तर्क", question: "यदि किसी कूट भाषा में 'STEAMER' को 'TUFBNFS' लिखा जाता है, तो 'HOUSE' को क्या लिखा जाएगा?", options: ["IPVTF", "IQVTF", "IQUTF", "IPVUF"], answer: "IPVUF" },
            { section: "सामान्य बुद्धि और तर्क", question: "श्रृंखला को पूरा करें: 5, 11, 23, 47, 95, ?", options: ["191", "190", "181", "161"], answer: "191" },
            { section: "सामान्य बुद्धि और तर्क", question: "एक तस्वीर की ओर इशारा करते हुए, एक व्यक्ति ने कहा, 'मेरा कोई भाई या बहन नहीं है, लेकिन उस व्यक्ति का पिता मेरे पिता का पुत्र है।' वह तस्वीर किसकी है?", options: ["उसकी अपनी", "उसके पुत्र की", "उसके पिता की", "उसके भतीजे की"], answer: "उसके पुत्र की" },
            { section: "सामान्य बुद्धि और तर्क", question: "विषम का चयन करें।", options: ["वर्ग", "आयत", "वृत्त", "त्रिभुज"], answer: "वृत्त" },
            { section: "सामान्य बुद्धि और तर्क", question: "कथन: सभी बिल्लियाँ कुत्ते हैं। कुछ बाघ बिल्लियाँ हैं। निष्कर्ष I: कुछ बाघ कुत्ते हैं। निष्कर्ष II: सभी कुत्ते बाघ हैं।", options: ["केवल I अनुसरण करता है", "केवल II अनुसरण करता है", "I और II दोनों अनुसरण करते हैं", "न तो I और न ही II अनुसरण करता है"], answer: "केवल I अनुसरण करता है" },
            { section: "सामान्य बुद्धि और तर्क", question: "एक कक्षा में 35 छात्रों में, सोहन का स्थान ऊपर से 7वां है। नीचे से उसका स्थान क्या है?", options: ["28वां", "29वां", "30वां", "27वां"], answer: "29वां" },
            { section: "सामान्य बुद्धि और तर्क", question: "A, B का भाई है। C, A की माता है। D, C का पिता है। B, D से किस प्रकार संबंधित है?", options: ["पोता", "परपोता", "पुत्री", "नातिन/नतिनी"], answer: "नातिन/नतिनी" },
            { section: "सामान्य बुद्धि और तर्क", question: "यदि '+' का अर्थ '×', '−' का अर्थ '+', '×' का अर्थ '÷' और '÷' का अर्थ '−' है, तो 20 − 8 × 4 ÷ 3 + 2 का मान क्या है?", options: ["16", "18", "20", "22"], answer: "16" },
            { section: "सामान्य बुद्धि और तर्क", question: "लुप्त संख्या ज्ञात कीजिए: 3, 4, 7, 11, 18, 29, ?", options: ["39", "43", "47", "51"], answer: "47" },
            { section: "सामान्य बुद्धि और तर्क", question: "निम्नलिखित शब्दों को एक तार्किक और सार्थक क्रम में व्यवस्थित करें: 1. नियुक्ति, 2. आवेदन, 3. विज्ञापन, 4. साक्षात्कार, 5. चयन", options: ["3, 2, 4, 5, 1", "3, 2, 5, 4, 1", "2, 3, 4, 5, 1", "3, 4, 2, 5, 1"], answer: "3, 2, 4, 5, 1" },
            { section: "सामान्य बुद्धि और तर्क", question: "यदि PERIL को 75993 लिखा जाता है और RAID को 9194 लिखा जाता है, तो DRAIN को कैसे लिखा जाएगा?", options: ["49193", "49195", "41993", "49913"], answer: "49193" },
            { section: "सामान्य बुद्धि और तर्क", question: "एक घड़ी में 3 बजे हैं। यदि मिनट की सुई उत्तर-पूर्व की ओर है, तो घंटे की सुई किस दिशा में होगी?", options: ["दक्षिण-पूर्व", "दक्षिण-पश्चिम", "उत्तर-पश्चिम", "उत्तर-पूर्व"], answer: "दक्षिण-पूर्व" },
            { section: "सामान्य बुद्धि और तर्क", question: "यदि कल से पहले का दिन गुरुवार था, तो रविवार कब होगा?", options: ["आने वाला कल", "आज", "आने वाले कल के बाद का दिन", "दो दिन बाद"], answer: "आने वाला कल" },
            { section: "सामान्य बुद्धि और तर्क", question: "कौन सा वेन आरेख 'माताएँ, महिलाएँ, डॉक्टर' के बीच संबंध को सबसे अच्छा दर्शाता है?", options: ["तीन अलग-अलग वृत्त", "तीन परस्पर जुड़े वृत्त", "एक वृत्त के अंदर दो जुड़े वृत्त", "दो अलग वृत्त और एक बड़ा वृत्त"], answer: "तीन परस्पर जुड़े वृत्त" },
            { section: "सामान्य बुद्धि और तर्क", question: "अनन्या पूर्व की ओर 10 किमी चलती है, फिर दाएं मुड़कर 10 किमी चलती है। फिर वह हर बार बाएं मुड़कर क्रमशः 5, 15 और 15 किमी चलती है। वह अपने प्रारंभिक बिंदु से अब कितनी दूर है?", options: ["5 किमी", "10 किमी", "15 किमी", "20 किमी"], answer: "5 किमी" },

            // खंड: कंप्यूटर और अनुप्रयोगों की मूल बातें (20 प्रश्न)
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "कंप्यूटर का 'मस्तिष्क' किसे कहा जाता है?", options: ["मॉनिटर", "कीबोर्ड", "सीपीयू (CPU)", "माउस"], answer: "सीपीयू (CPU)" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "1 किलोबाइट (KB) में कितने बाइट होते हैं?", options: ["1000", "1024", "1048", "1012"], answer: "1024" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "निम्नलिखित में से कौन एक इनपुट डिवाइस नहीं है?", options: ["कीबोर्ड", "माउस", "स्कैनर", "प्रिंटर"], answer: "प्रिंटर" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "RAM का पूर्ण रूप क्या है?", options: ["Read Access Memory", "Random Access Memory", "Read Application Module", "Remote Access Machine"], answer: "Random Access Memory" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "निम्नलिखित में से कौन सा एक ऑपरेटिंग सिस्टम है?", options: ["MS-Excel", "Windows 10", "Google Chrome", "Notepad"], answer: "Windows 10" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "वेबसाइट के पहले पेज को क्या कहा जाता है?", options: ["मुख्य पृष्ठ (Main Page)", "बुकमार्क (Bookmark)", "होम पेज (Home Page)", "सूचकांक पृष्ठ (Index Page)"], answer: "होम पेज (Home Page)" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "MS-Word में, टेक्स्ट को 'कट' करने के लिए शॉर्टकट कुंजी क्या है?", options: ["Ctrl + C", "Ctrl + V", "Ctrl + X", "Ctrl + Z"], answer: "Ctrl + X" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "ईमेल भेजने के लिए किस प्रोटोकॉल का उपयोग किया जाता है?", options: ["HTTP", "FTP", "SMTP", "POP3"], answer: "SMTP" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "URL का पूर्ण रूप क्या है?", options: ["Uniform Resource Link", "Uniform Resource Locator", "Universal Resource Link", "Universal Resource Locator"], answer: "Uniform Resource Locator" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "कंप्यूटर में डेटा की सबसे छोटी इकाई क्या है?", options: ["बाइट (Byte)", "बिट (Bit)", "निबल (Nibble)", "किलोबाइट (KB)"], answer: "बिट (Bit)" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "निम्नलिखित में से कौन सा एक वेब ब्राउज़र का उदाहरण है?", options: ["Microsoft Word", "Mozilla Firefox", "Quick Heal", "Tally"], answer: "Mozilla Firefox" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "एक कंप्यूटर वायरस क्या है?", options: ["एक हार्डवेयर घटक", "एक सॉफ्टवेयर प्रोग्राम", "एक नेटवर्क डिवाइस", "एक ऑपरेटिंग सिस्टम"], answer: "एक सॉफ्टवेयर प्रोग्राम" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "LAN का पूर्ण रूप क्या है?", options: ["Large Area Network", "Local Area Network", "Logical Area Network", "Live Area Network"], answer: "Local Area Network" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "अस्थायी (volatile) मेमोरी कौन सी है?", options: ["ROM", "RAM", "Hard Disk", "SSD"], answer: "RAM" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "ALU का पूर्ण रूप क्या है?", options: ["Arithmetic Logic Unit", "Array Logic Unit", "Application Logic Unit", "Artificial Logic Unit"], answer: "Arithmetic Logic Unit" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "एक फ़ाइल को स्थायी रूप से संग्रहीत करने के लिए किस डिवाइस का उपयोग किया जाता है?", options: ["RAM", "कैश मेमोरी (Cache)", "हार्ड डिस्क (Hard Disk)", "रजिस्टर (Register)"], answer: "हार्ड डिस्क (Hard Disk)" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "Linux किसका एक उदाहरण है?", options: ["एप्लीकेशन सॉफ्टवेयर", "ऑपरेटिंग सिस्टम", "प्रोग्रामिंग भाषा", "एंटीवायरस"], answer: "ऑपरेटिंग सिस्टम" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "\".docx\" फाइल एक्सटेंशन किस एप्लीकेशन से संबंधित है?", options: ["MS Excel", "MS PowerPoint", "MS Word", "Paint"], answer: "MS Word" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "इंटरनेट पर डेटा के सुरक्षित प्रसारण को सुनिश्चित करने के लिए किस प्रोटोकॉल का उपयोग किया जाता है?", options: ["HTTP", "HTTPS", "FTP", "SMTP"], answer: "HTTPS" },
            { section: "कंप्यूटर और अनुप्रयोगों की मूल बातें", question: "बाइनरी संख्या प्रणाली का आधार क्या है?", options: ["2", "8", "10", "16"], answer: "2" },

            // Mathematics  (20 Questions)
            { section: "गणित", question: "यदि 18 वस्तुओं का क्रय मूल्य 15 वस्तुओं के विक्रय मूल्य के बराबर है, तो लाभ प्रतिशत क्या है?", options: ["15%", "20%", "25%", "18%"], answer: "20%" },
            { section: "गणित", question: "एक 150 मीटर लंबी ट्रेन 54 किमी/घंटा की गति से चल रही है। एक खंभे को पार करने में उसे कितना समय लगेगा?", options: ["8 सेकंड", "10 सेकंड", "12 सेकंड", "15 सेकंड"], answer: "10 सेकंड" },
            { section: "गणित", question: "₹8000 पर 5% वार्षिक दर से 2 वर्ष का चक्रवृद्धि ब्याज क्या होगा?", options: ["₹800", "₹820", "₹840", "₹810"], answer: "₹820" },
            { section: "गणित", question: "दो संख्याओं का अनुपात 3:4 है और उनका लघुत्तम समापवर्त्य (LCM) 180 है। संख्याएं क्या हैं?", options: ["30, 40", "45, 60", "36, 48", "27, 36"], answer: "45, 60" },
            { section: "गणित", question: "A एक काम को 10 दिनों में कर सकता है और B उसी काम को 15 दिनों में कर सकता है। दोनों मिलकर उस काम को कितने दिनों में पूरा करेंगे?", options: ["5 दिन", "6 दिन", "8 दिन", "9 दिन"], answer: "6 दिन" },
            { section: "गणित", question: "सरल करें: (17.28 ÷ ?) / (3.6 × 0.2) = 200", options: ["1.2", "0.12", "12", "0.012"], answer: "0.12" },
            { section: "गणित", question: "5 क्रमागत सम संख्याओं का औसत 42 है। सबसे बड़ी संख्या क्या है?", options: ["44", "46", "48", "50"], answer: "46" },
            { section: "गणित", question: "एक आयत की लंबाई 10% बढ़ा दी जाती है और चौड़ाई 10% घटा दी जाती है। उसके क्षेत्रफल में क्या परिवर्तन होगा?", options: ["1% वृद्धि", "1% कमी", "कोई परिवर्तन नहीं", "2% कमी"], answer: "1% कमी" },
            { section: "गणित", question: "यदि 2A = 3B = 4C है, तो A:B:C का अनुपात क्या है?", options: ["2:3:4", "4:3:2", "6:4:3", "3:4:6"], answer: "6:4:3" },
            { section: "गणित", question: "√7744 का मान ज्ञात कीजिए।", options: ["78", "88", "92", "82"], answer: "88" },
            { section: "गणित", question: "एक समकोण त्रिभुज का आधार 8 सेमी और कर्ण 17 सेमी है। इसका क्षेत्रफल क्या है?", options: ["60 सेमी²", "68 सेमी²", "120 सेमी²", "136 सेमी²"], answer: "60 सेमी²" },
            { section: "गणित", question: "एक नाव धारा के अनुकूल 21 किमी/घंटा और धारा के प्रतिकूल 9 किमी/घंटा की गति से चलती है। शांत जल में नाव की गति क्या है?", options: ["12 किमी/घंटा", "15 किमी/घंटा", "18 किमी/घंटा", "10 किमी/घंटा"], answer: "15 किमी/घंटा" },
            { section: "गणित", question: "यदि किसी संख्या का 35%, 175 है, तो वह संख्या क्या है?", options: ["400", "500", "600", "700"], answer: "500" },
            { section: "गणित", question: "BODMAS नियम का उपयोग करके मान ज्ञात करें: 240 ÷ 8 × (120 ÷ 15) - 5", options: ["235", "240", "230", "225"], answer: "235" },
            { section: "गणित", question: "एक वृत्त की परिधि 88 सेमी है। इसका व्यास क्या है? (π = 22/7)", options: ["14 सेमी", "21 सेमी", "28 सेमी", "35 सेमी"], answer: "28 सेमी" },
            { section: "गणित", question: "एक पिता की आयु उसके पुत्र की आयु से तीन गुनी है। 12 वर्ष बाद, पिता की आयु पुत्र की आयु की दोगुनी होगी। पिता की वर्तमान आयु क्या है?", options: ["30 वर्ष", "36 वर्ष", "42 वर्ष", "48 वर्ष"], answer: "36 वर्ष" },
            { section: "गणित", question: "1 से 100 तक की सभी प्राकृतिक संख्याओं का योग क्या है?", options: ["5050", "5000", "5500", "5005"], answer: "5050" },
            { section: "गणित", question: "sin(45°) + cos(45°) का मान क्या है?", options: ["√2", "1/√2", "1", "2"], answer: "√2" },
            { section: "गणित", question: "यदि 20 पुरुष एक खाई को 18 दिनों में खोद सकते हैं, तो 36 पुरुष उसी खाई को कितने दिनों में खोदेंगे?", options: ["8 दिन", "10 दिन", "12 दिन", "14 दिन"], answer: "10 दिन" },
            { section: "गणित", question: "1, 2, 5, 10, 20, 50, 100 रुपये के कितने नोट मिलकर 288 रुपये होंगे, यदि सभी प्रकार के नोटों की संख्या समान हो?", options: ["प्रत्येक के 2", "प्रत्यएक के 3", "प्रत्येक के 4", "प्रत्येक के 1"], answer: "प्रत्येक के 2" },

            // खंड: बेसिक साइंस और इंजीनियरिंग (35 प्रश्न)
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "कार्य करने की दर को क्या कहते हैं?", options: ["ऊर्जा", "शक्ति", "बल", "संवेग"], answer: "शक्ति" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "निम्नलिखित में से कौन सी एक सदिश राशि है (जिसमें परिमाण और दिशा दोनों होते हैं)?", options: ["दूरी", "गति", "द्रव्यमान", "वेग"], answer: "वेग" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "निकट-दृष्टि दोष (Myopia) को ठीक करने के लिए किस लेंस का उपयोग किया जाता है?", options: ["उत्तल लेंस", "अवतल लेंस", "बेलनाकार लेंस", "द्विफोकसी लेंस"], answer: "अवतल लेंस" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "कोशिका का 'पावर हाउस' किसे कहा जाता है?", options: ["केंद्रक", "राइबोसोम", "माइटोकॉन्ड्रिया", "लाइसोसोम"], answer: "माइटोकॉन्ड्रिया" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "धावन सोडा (Washing Soda) का रासायनिक नाम क्या है?", options: ["सोडियम बाइकार्बोनेट", "सोडियम कार्बोनेट", "कैल्शियम कार्बोनेट", "सोडियम क्लोराइड"], answer: "सोडियम कार्बोनेट" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "ध्वनि किस माध्यम में सबसे तेज यात्रा करती है?", options: ["निर्वात", "वायु", "जल", "ठोस (इस्पात)"], answer: "ठोस (इस्पात)" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "विटामिन डी की कमी से कौन सा रोग होता है?", options: ["स्कर्वी", "बेरी-बेरी", "रिकेट्स", "रतौंधी"], answer: "रिकेट्स" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "ओम का नियम (Ohm's Law) किन तीन राशियों के बीच संबंध स्थापित करता है?", options: ["वोल्टेज, धारा, प्रतिरोध", "बल, द्रव्यमान, त्वरण", "कार्य, शक्ति, समय", "दबाव, आयतन, तापमान"], answer: "वोल्टेज, धारा, प्रतिरोध" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "कौन सी गैस मुख्य रूप से ग्रीनहाउस प्रभाव के लिए जिम्मेदार है?", options: ["ऑक्सीजन", "नाइट्रोजन", "कार्बन डाइऑक्साइड", "हाइड्रोजन"], answer: "कार्बन डाइऑक्साइड" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "जब कोई वस्तु सीधे ठोस अवस्था से गैस अवस्था में परिवर्तित हो जाती है, तो इस प्रक्रिया को क्या कहते हैं?", options: ["वाष्पीकरण", "संघनन", "पिघलना", "ऊर्ध्वपातन"], answer: "ऊर्ध्वपातन" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "कौन सा रक्त समूह 'सार्वभौमिक दाता' (universal donor) के रूप में जाना जाता है?", options: ["A", "B", "AB", "O"], answer: "O" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "बिजली के बल्ब का फिलामेंट आमतौर पर किस धातु का बना होता है?", options: ["लोहा", "टंगस्टन", "तांबा", "चांदी"], answer: "टंगस्टन" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "उदासीन विलयन का pH मान क्या होता है?", options: ["7 से कम", "ठीक 7", "7 से अधिक", "0"], answer: "ठीक 7" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "गति के किस नियम को 'जड़त्व का नियम' भी कहा जाता है?", options: ["न्यूटन का पहला नियम", "न्यूटन का दूसरा नियम", "न्यूटन का तीसरा नियम", "गुरुत्वाकर्षण का नियम"], answer: "न्यूटन का पहला नियम" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "एक अश्वशक्ति (Horsepower) में कितने वाट होते हैं?", options: ["736 वाट", "746 वाट", "756 वाट", "766 वाट"], answer: "746 वाट" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "पौधों में प्रकाश संश्लेषण के लिए कौन सा भाग जिम्मेदार है?", options: ["जड़", "तना", "फूल", "पत्ती"], answer: "पत्ती" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "किसी वस्तु की गति के कारण उसमें मौजूद ऊर्जा को क्या कहते हैं?", options: ["स्थितिज ऊर्जा", "गतिज ऊर्जा", "ऊष्मा ऊर्जा", "रासायनिक ऊर्जा"], answer: "गतिज ऊर्जा" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "वायुमंडलीय दाब को मापने के लिए किस उपकरण का उपयोग किया जाता है?", options: ["हाइड्रोमीटर", "बैरोमीटर", "मैनोमीटर", "थर्मामीटर"], answer: "बैरोमीटर" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "कौन सी धातु कमरे के तापमान पर तरल अवस्था में होती है?", options: ["सोडियम", "ब्रोमीन", "पारा (मरकरी)", "कैल्शियम"], answer: "पारा (मरकरी)" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "मानव रक्त का लाल रंग किसकी उपस्थिति के कारण होता है?", options: ["प्लाज्मा", "प्लेटलेट्स", "हीमोग्लोबिन", "श्वेत रक्त कोशिकाएं"], answer: "हीमोग्लोबिन" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "फ्यूज तार एक मिश्र धातु से बना होता है जिसमें होता है:", options: ["उच्च गलनांक, उच्च प्रतिरोध", "निम्न गलनांक, उच्च प्रतिरोध", "उच्च गलनांक, निम्न प्रतिरोध", "निम्न गलनांक, निम्न प्रतिरोध"], answer: "निम्न गलनांक, उच्च प्रतिरोध" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "गुरुत्वाकर्षण के सार्वभौमिक नियम का प्रतिपादन किसने किया?", options: ["गैलीलियो", "कॉपरनिकस", "आइजैक न्यूटन", "केपलर"], answer: "आइजैक न्यूटन" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "एक उत्तोलक (lever) में, जिस बिंदु के चारों ओर वह घूमता है, उसे क्या कहते हैं?", options: ["आयास (Effort)", "भार (Load)", "आलम्ब (Fulcrum)", "भुजा (Arm)"], answer: "आलम्ब (Fulcrum)" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "एक भारी नाभिक के छोटे-छोटे नाभिकों में टूटने की प्रक्रिया को क्या कहते हैं?", options: ["नाभिकीय संलयन", "नाभिकीय विखंडन", "श्रृंखला अभिक्रिया", "रेडियोधर्मिता"], answer: "नाभिकीय विखंडन" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "रॉकेट का कार्य किस सिद्धांत पर आधारित है?", options: ["द्रव्यमान संरक्षण", "ऊर्जा संरक्षण", "संवेग संरक्षण", "आर्किमिडीज का सिद्धांत"], answer: "संवेग संरक्षण" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "कौन सा उपकरण विद्युत ऊर्जा को यांत्रिक ऊर्जा में परिवर्तित करता है?", options: ["जनरेटर", "मोटर", "ट्रांसफार्मर", "इन्वर्टर"], answer: "मोटर" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "प्रकाश के प्राथमिक रंग कौन से हैं?", options: ["लाल, पीला, नीला", "लाल, हरा, नीला", "लाल, हरा, पीला", "मैजेंटा, सियान, पीला"], answer: "लाल, हरा, नीला" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "सोने का रासायनिक प्रतीक क्या है?", options: ["Ag", "Au", "Pb", "Fe"], answer: "Au" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "एक वस्तु का द्रव्यमान 10 किग्रा है। पृथ्वी पर इसका भार कितना होगा? (g = 9.8 m/s² मानें)", options: ["10 न्यूटन", "98 न्यूटन", "9.8 न्यूटन", "1 न्यूटन"], answer: "98 न्यूटन" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "निम्नलिखित में से कौन सा एक नवीकरणीय ऊर्जा स्रोत है?", options: ["कोयला", "पेट्रोलियम", "सौर ऊर्जा", "प्राकृतिक गैस"], answer: "सौर ऊर्जा" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "लेंस की शक्ति की SI इकाई क्या है?", options: ["वाट", "मीटर", "डायोप्टर", "सेंटीमीटर"], answer: "डायोप्टर" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "मानव कान की श्रव्य सीमा क्या है?", options: ["20 हर्ट्ज से 2000 हर्ट्ज", "20 हर्ट्ज से 20,000 हर्ट्ज", "2 हर्ट्ज से 2000 हर्ट्ज", "200 हर्ट्ज से 20,000 हर्ट्ज"], answer: "20 हर्ट्ज से 20,000 हर्ट्ज" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "आवर्त सारणी में पहला तत्व कौन सा है?", options: ["हीलियम", "ऑक्सीजन", "हाइड्रोजन", "लिथियम"], answer: "हाइड्रोजन" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "बल का सूत्र क्या है?", options: ["द्रव्यमान × वेग", "द्रव्यमान × त्वरण", "कार्य / समय", "दबाव × क्षेत्रफल"], answer: "द्रव्यमान × त्वरण" },
            { section: "बेसिक साइंस और इंजीनियरिंग", question: "बिजली के हीटर का एलिमेंट किस पदार्थ का बना होता है?", options: ["तांबा", "टंगस्टन", "नाइक्रोम", "एल्यूमीनियम"], answer: "नाइक्रोम" },
        ];
        
        // --- State Variables ---
        let questions = [];
        let currentQuestionIndex = 0;
        let questionStatus = []; // 0: Not Visited, 1: Not Answered, 2: Answered, 3: Marked, 4: Answered & Marked
        let userAnswers = [];
        let timerInterval;

        // --- CORE FUNCTIONS (FIXED: Changed to `function` declaration for hoisting) ---

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        function initializeTest() {
            // 1. Prepare questions
            const sections = {};
            allQuestions.forEach(q => {
                if (!sections[q.section]) {
                    sections[q.section] = [];
                }
                sections[q.section].push(q);
            });
            
            for (const sectionName in sections) {
                shuffleArray(sections[sectionName]);
            }

            const orderedSectionNames = [
                "सामान्य जागरूकता",
                "सामान्य बुद्धि और तर्क",
                "कंप्यूटर और अनुप्रयोगों की मूल बातें",
                "गणित",
                "बेसिक साइंस और इंजीनियरिंग"
            ];

            questions = [];
            orderedSectionNames.forEach(sectionName => {
                if (sections[sectionName]) {
                    questions = questions.concat(sections[sectionName]);
                }
            });
            
            // 2. Reset state
            currentQuestionIndex = 0;
            questionStatus = new Array(questions.length).fill(0);
            userAnswers = new Array(questions.length).fill(null);
            
            // 3. Build Palette
            elements.questionPalette.innerHTML = '';
            questions.forEach((q, index) => {
                const paletteItem = document.createElement('div');
                paletteItem.className = 'palette-item q-not-visited';
                paletteItem.textContent = index + 1;
                paletteItem.dataset.index = index;
                paletteItem.addEventListener('click', () => jumpToQuestion(index));
                elements.questionPalette.appendChild(paletteItem);
            });
            
            // 4. Switch screens
            elements.instructionsScreen.classList.add('hidden');
            elements.resultsScreen.classList.add('hidden');
            elements.mainTestScreen.classList.remove('hidden');

            // 5. Start test
            loadQuestion(0);
            startTimer(90 * 60); // 90 minutes
        }
        
        function startTimer(duration) {
            let time = duration;
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                let hours = Math.floor(time / 3600);
                let minutes = Math.floor((time % 3600) / 60);
                let seconds = time % 60;

                hours = hours < 10 ? '0' + hours : hours;
                minutes = minutes < 10 ? '0' + minutes : minutes;
                seconds = seconds < 10 ? '0' + seconds : seconds;

                elements.timer.textContent = `${hours}:${minutes}:${seconds}`;
                
                if (--time < 0) {
                    clearInterval(timerInterval);
                    submitTest();
                }
            }, 1000);
        }

        function loadQuestion(index) {
            currentQuestionIndex = index;
            const question = questions[index];
            
            elements.qSection.textContent = `खंड: ${question.section}`;
            elements.qNum.textContent = `प्रश्न संख्या: ${index + 1}`;
            elements.questionText.textContent = question.question;
            elements.optionsContainer.innerHTML = '';

            const shuffledOptions = [...question.options];
            shuffleArray(shuffledOptions);

            shuffledOptions.forEach(option => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                const safeString = option.replace(/[^a-zA-Z0-9\u0900-\u097F]/g, '');
                const optionId = `opt_${index}_${safeString}`;
                optionDiv.innerHTML = `
                    <input type="radio" name="option" value="${option}" id="${optionId}">
                    <label for="${optionId}">${option}</label>
                `;
                elements.optionsContainer.appendChild(optionDiv);
            });
            
            if (userAnswers[index] !== null) {
                const selectedInput = document.querySelector(`input[value="${userAnswers[index]}"]`);
                if(selectedInput) {
                    selectedInput.checked = true;
                    selectedInput.parentElement.classList.add('selected');
                }
            }

            if(questionStatus[index] === 0) {
                 updateQuestionStatus(index, 1);
            }
        }

        function updateQuestionStatus(index, status) {
            questionStatus[index] = status;
            const paletteItem = elements.questionPalette.children[index];
            paletteItem.className = 'palette-item';
            switch(status) {
                case 1: paletteItem.classList.add('q-not-answered'); break;
                case 2: paletteItem.classList.add('q-answered'); break;
                case 3: paletteItem.classList.add('q-marked'); break;
                case 4: paletteItem.classList.add('q-marked', 'q-answered-marked'); break;
                default: paletteItem.classList.add('q-not-visited');
            }
        }
        
        function jumpToQuestion(index) {
            if (index >= 0 && index < questions.length) {
                loadQuestion(index);
            }
        }

        function handleSaveNext() {
            const selectedOption = document.querySelector('input[name="option"]:checked');
            if(selectedOption) {
                userAnswers[currentQuestionIndex] = selectedOption.value;
                updateQuestionStatus(currentQuestionIndex, 2); 
            } else {
                 if (questionStatus[currentQuestionIndex] !== 2 && questionStatus[currentQuestionIndex] !== 4) {
                    updateQuestionStatus(currentQuestionIndex, 1);
                 }
            }
            if (currentQuestionIndex < questions.length - 1) {
                jumpToQuestion(currentQuestionIndex + 1);
            } else {
                 alert('यह अंतिम प्रश्न है। आप अपने उत्तरों की समीक्षा कर सकते हैं या टेस्ट सबमिट कर सकते हैं।');
            }
        }
        
        function handleMarkReview() {
             const selectedOption = document.querySelector('input[name="option"]:checked');
             if(selectedOption) {
                 userAnswers[currentQuestionIndex] = selectedOption.value;
                 updateQuestionStatus(currentQuestionIndex, 4);
             } else {
                 updateQuestionStatus(currentQuestionIndex, 3);
             }
             if (currentQuestionIndex < questions.length - 1) {
                jumpToQuestion(currentQuestionIndex + 1);
            } else {
                 alert('यह अंतिम प्रश्न है। आप अपने उत्तरों की समीक्षा कर सकते हैं या टेस्ट सबमिट कर सकते हैं।');
            }
        }

        function handleClearResponse() {
            const selectedOption = document.querySelector('input[name="option"]:checked');
            if(selectedOption) {
                selectedOption.checked = false;
                selectedOption.parentElement.classList.remove('selected');
            }
            userAnswers[currentQuestionIndex] = null;
            updateQuestionStatus(currentQuestionIndex, 1);
        }

        function submitTest() {
            clearInterval(timerInterval);
            let score = 0;
            let correctCount = 0;
            let incorrectCount = 0;
            let attemptedCount = 0;
            
            for(let i=0; i<questions.length; i++) {
                if(userAnswers[i] !== null) {
                    attemptedCount++;
                    if(userAnswers[i] === questions[i].answer) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                }
            }
            
            score = correctCount * 1 - incorrectCount * (1/3);
            score = Math.max(0, score); 
            
            elements.attemptedQ.textContent = attemptedCount;
            elements.correctQ.textContent = correctCount;
            elements.incorrectQ.textContent = incorrectCount;
            elements.scoreText.textContent = `${score.toFixed(2)} / 100`;
            
            elements.mainTestScreen.classList.add('hidden');
            elements.resultsScreen.classList.remove('hidden');
        }

        // --- Event Listeners ---

        elements.optionsContainer.addEventListener('click', (e) => {
            const optionDiv = e.target.closest('.option');
            if (!optionDiv) return;

            elements.optionsContainer.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
            optionDiv.classList.add('selected');
            
            const radio = optionDiv.querySelector('input[type="radio"]');
            if (radio) {
                radio.checked = true;
            }
        });

        elements.startTestBtn.addEventListener('click', initializeTest);
        
        elements.retryBtn.addEventListener('click', () => {
            window.location.reload();
        });

        elements.saveNextBtn.addEventListener('click', handleSaveNext);
        elements.markReviewBtn.addEventListener('click', handleMarkReview);
        elements.clearResponseBtn.addEventListener('click', handleClearResponse);
        
        elements.submitBtn.addEventListener('click', () => {
            if(confirm('क्या आप वाकई टेस्ट सबमिट करना चाहते हैं?')) {
                submitTest();
            }
        });
    });
    </script>
</body>
</html>